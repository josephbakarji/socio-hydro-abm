<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Functions - Hybrid Social-Ecological Models</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Hybrid Social-Ecological Models">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="Hybrid Social-Ecological Models">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../assets/Documenter.css">
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        Functions
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Hybrid Social-Ecological Models
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Introduction" href="..">
      Introduction
    </a>
    
  </li>

          
            
  <li>
    <a class="current" title="Functions" href="./">
      Functions
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Social Dynamics" href="#social-dynamics">
                Social Dynamics
              </a>
            </li>
          
            <li class="anchor">
              <a title="Coupled Socio-Hydrology" href="#coupled-socio-hydrology">
                Coupled Socio-Hydrology
              </a>
            </li>
          
            <li class="anchor">
              <a title="Support Functions" href="#support-functions">
                Support Functions
              </a>
            </li>
          
            <li class="anchor">
              <a title="index" href="#index">
                index
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            
  <li>
    <a class="" title="Examples" href="../examples/">
      Examples
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <p><a id='Functions-1'></a></p>
<h1 id="functions">Functions</h1>
<ul>
<li><a href="./#Functions-1">Functions</a><ul>
<li><a href="./#Social-Dynamics-1">Social Dynamics</a></li>
<li><a href="./#Coupled-Socio-Hydrology-1">Coupled Socio-Hydrology</a></li>
<li><a href="./#Support-Functions-1">Support Functions</a></li>
<li><a href="./#index-1">index</a></li>
</ul>
</li>
<li><a href="../examples/#Examples-1">Examples</a><ul>
<li><a href="../examples/#Which-social-model-to-use-1">Which social model to use</a></li>
<li><a href="../examples/#Concentration-vs.-Risk-1">Concentration vs. Risk</a></li>
</ul>
</li>
<li><a href="..#Introduction-1">Introduction</a><ul>
<li><a href="..#Problem-Statement-1">Problem Statement</a></li>
<li><a href="..#Social-Modeling-1">Social Modeling</a></li>
<li><a href="..#Water-Contamination-1">Water Contamination</a></li>
<li><a href="..#Control-in-Coupling-Socio-Hydological-Dynamics-1">Control in Coupling Socio-Hydological Dynamics</a></li>
</ul>
</li>
</ul>
<p>This is a list of all the functions used in the Socio-hydrology package.</p>
<p><a id='Social-Dynamics-1'></a></p>
<h2 id="social-dynamics">Social Dynamics</h2>
<p>The following functions are used to simulate social consistency and conformity dynamics. For more information about consistency-conformity dynamics refer to <a href="http://groups.csail.mit.edu/belief-dynamics/MURI/papers07/Pagedblcoord14.pdf">this</a> paper.</p>
<p><a id='SocialDynamics.socdyn-Tuple{Any,Any,Any,Any,Any,Any,Any,Any}' href='#SocialDynamics.socdyn-Tuple{Any,Any,Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SocialDynamics.socdyn</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>socdyn(nc, ns, a, p, steps, adfreq, seed, model)
</code></pre>

<p>Basic consistency-conformity social dynamics simulation function.</p>
<p>Arguments:</p>
<ul>
<li><code>nc</code> : Number of non-expert citizens</li>
<li><code>ns</code> : number of experts</li>
<li><code>a</code> : number of attributes (belief, usage)</li>
<li><code>steps</code> : number of iterations each consisting of 1 interaction/person</li>
<li><code>adfreq</code> : advertising frequency</li>
<li><code>model</code> : expert influence for <code>model = "scientist"</code>, one-time media influence for <code>model = "ad"</code>, or regular media ads for <code>model = "regad"</code></li>
</ul>
<p>Returns:</p>
<ul>
<li><code>n-tuse</code>: number of users</li>
</ul>
<p><a id='SocialDynamics.socdyncoupexp-Tuple{Any,Any,Any,Any,Any,Any}' href='#SocialDynamics.socdyncoupexp-Tuple{Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SocialDynamics.socdyncoupexp</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>socdyncoupexp(n, ns, belief, soc, p, steps)
</code></pre>

<p>Expert social dynamics.</p>
<p>Arguments:</p>
<ul>
<li><code>n</code>: population size</li>
<li><code>ns</code> : number of experts</li>
<li><code>belief</code> : binary belief of water contamination</li>
<li><code>soc</code> : social record <code>[belief, usage, cont-accumulation, age]</code>.</li>
<li><code>p</code> : consistency rate; which gives the conformity rate <code>(1-p)</code>.</li>
<li><code>steps</code>: number of iterations each consisting of 1 interaction/person</li>
</ul>
<p>Returns:</p>
<ul>
<li>updated <code>soc</code></li>
</ul>
<p><a id='SocialDynamics.socdyncoupad-Tuple{Any,Any,Any,Any,Any,Any,Any}' href='#SocialDynamics.socdyncoupad-Tuple{Any,Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SocialDynamics.socdyncoupad</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>socdyncoupad(n, adflag, belief, popfrac, soc, p, steps)
</code></pre>

<p>Media social dynamics.</p>
<p>Arguments:</p>
<ul>
<li><code>n</code>: population size</li>
<li><code>adflag</code> : media influence if <code>adflag = 1</code>, do nothing otherwise.</li>
<li><code>belief</code> : binary belief of water contamination</li>
<li><code>popfrac</code> : fraction of population targetted with each ad campain.</li>
<li><code>soc</code> : social record <code>[belief, usage, cont-accumulation, age]</code>.</li>
<li><code>p</code> : consistency rate; which gives the conformity rate <code>(1-p)</code>.</li>
<li><code>steps</code>: number of iterations each consisting of 1 interaction/person</li>
</ul>
<p>Returns:</p>
<ul>
<li>updated <code>soc</code></li>
</ul>
<p><a id='SocialDynamics.treefuncexp-Tuple{Any,Any,Any,Any,Any,Any}' href='#SocialDynamics.treefuncexp-Tuple{Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SocialDynamics.treefuncexp</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>treefuncexp(ss, expnum, soc, pconsist, simtime, iurate)
</code></pre>

<p>Expert hierarchical social dynamics according to interaction rate</p>
<p>Arguments:</p>
<ul>
<li><code>ss</code> : vector for branching structure. For example <code>[2 2 2 2]</code> is a binary tree with 4 levels</li>
<li><code>expnum</code> : number of experts </li>
<li><code>soc</code> : social record <code>[belief, usage, cont-accumulation, age]</code>.</li>
<li><code>pconsist</code> : consistency rate</li>
<li><code>simtime</code> : simulation time (per interaction interval)</li>
<li><code>iurate</code> : initial usage rate</li>
</ul>
<p>Returns:</p>
<ul>
<li>updated <code>soc</code>.</li>
</ul>
<p><a id='SocialDynamics.treefuncad-Tuple{Any,Any,Any,Any,Any,Any,Any}' href='#SocialDynamics.treefuncad-Tuple{Any,Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SocialDynamics.treefuncad</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>treefuncad(ss, adflag, soc, pconsist, simtime, iurate, spreadrate)
</code></pre>

<p>Media hierarchical social dynamics according to interaction rate</p>
<p>Arguments:</p>
<ul>
<li><code>ss</code> : vector for branching structure. For example <code>[2 2 2 2]</code> is a binary tree with 4 levels</li>
<li><code>adflag</code> : media influence if <code>adflag = 1</code>, do nothing otherwise.</li>
<li><code>soc</code> : social record <code>[belief, usage, cont-accumulation, age]</code>.</li>
<li><code>pconsist</code> : consistency rate</li>
<li><code>simtime</code> : simulation time (per interaction interval)</li>
<li><code>iurate</code> : initial usage rate</li>
<li><code>spreadrate</code> : portion of population affected by ads.</li>
</ul>
<p>Returns:</p>
<ul>
<li>updated <code>soc</code>.</li>
</ul>
<p><a id='Coupled-Socio-Hydrology-1'></a></p>
<h2 id="coupled-socio-hydrology">Coupled Socio-Hydrology</h2>
<p><a id='SocioHydrology.SocioFEHM-Tuple{}' href='#SocioHydrology.SocioFEHM-Tuple{}'>#</a>
<strong><code>SocioHydrology.SocioFEHM</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>SocioFEHM(; conc_risk = 0, exp_adv = 0, exprate_advper = 0.03 , simulationtime = 20, cthresh = 30, pid = [0, 0, 0],  measure_period = 1, predetect_time = 0, startpumptime = 10, init_urate = 0.99, popul= 10000, agelimit = 70, risk_percentile = .90,  adtargetfrac = 0.5, FEHMprefix = &quot;cm&quot;, outputfile = &quot;default_output_file.txt&quot;)
</code></pre>

<p>[requires names of variables]</p>
<p>Simulate a coupled consistency-conformity social dynamics with FEHM for contaminated aquifer.</p>
<p>Arguments:</p>
<ul>
<li><code>conc_risk</code> : concentration control (0), or risk control (1).</li>
<li><code>exp_adv</code> : expert influence (0), or media influence (1).</li>
<li><code>exprate_advper</code> : fraction of experts in population (if <code>exp_adv = 0</code>), or advertising period (if <code>exprate_advper = 1</code>).</li>
<li><code>simulationtime</code> : Total time of coupled simulation (in years).</li>
<li><code>cthresh</code> : concentration threshold (control reference). Risk threshold <code>rthresh</code> is calculated in equivalence.</li>
<li><code>pid</code> : vector <code>[pK, dK, iK]</code> of proportional-derivative-integral control coefficients. </li>
<li><code>measure_period</code> : time interval between two successive measurement events (years).</li>
<li><code>predetect_time</code> : time before contaminants are detected in acquifer (in years).</li>
<li><code>startpumptime</code> : Time (from beginning of FEHM simulation) after which pumping starts (years)</li>
<li><code>init_urate</code> : fraction of the population that initially uses the water.</li>
<li><code>popul</code> : population size.</li>
<li><code>agelimit</code> : age at which people die, and get replaced by a new-born (used for risk control).</li>
<li><code>risk_percentile</code>: Percentile of people kept below risk threshold.</li>
<li><code>adtargetfrac</code> : fraction of population reached by media influence (used for <code>exp_adv = 1</code>).</li>
<li><code>FEHMprefix</code> : FEHM prefix of files for aquifer simulation, placed in <code>./contaminantion-model/</code>.</li>
<li><code>outputfile</code> : Default suffix for saving data in text files; set to <code>""</code> to prevent saving.</li>
</ul>
<p>Returns:</p>
<p>return times, prate, adorbel, adornumexp, ucount</p>
<ul>
<li><code>times</code>: Times in years since of FEHM simulation.</li>
<li><code>adornumexp</code>: number of employed experts if <code>exp_adv = 0</code>, or period between sucessive ads if <code>exp_adv = 1</code></li>
<li><code>ucount</code>: number of water users.</li>
<li><code>conchist</code> : aquifer concentration history</li>
</ul>
<p><a id='Support-Functions-1'></a></p>
<h2 id="support-functions">Support Functions</h2>
<p><a id='SupportFunc.pidcontrol-Tuple{Any,Any,Any,Any,Any,Any,Any,Any,Any}' href='#SupportFunc.pidcontrol-Tuple{Any,Any,Any,Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SupportFunc.pidcontrol</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>pidcontrol(crthresh, pK, dK, iK, conchist, Dt, sig, exp_adv, expnum_advper)
</code></pre>

<p>Proportional-Derivative-Integral (PID) control of concentration or risk using a gaussian weight.</p>
<p>Arguments:</p>
<ul>
<li><code>crthresh</code>: concentration or risk threshold used as control reference.</li>
<li><code>pK</code>: proportional coefficient.</li>
<li><code>dK</code>: derivative coefficient.</li>
<li><code>iK</code>: integral coefficient.</li>
<li><code>conchist</code>: contaminant concentration record (all years until then)</li>
<li><code>Dt</code>: integration time increments. </li>
<li><code>sig</code>: gaussian weight standard deviation.</li>
<li><code>exp_adv</code>: expert influence (0), or media influence (1).</li>
<li><code>expnum_advper</code> : number of experts (if <code>exp_adv = 0</code>), or advertising intervals (if <code>exp_adv = 1</code>).</li>
</ul>
<p>Returns:</p>
<ul>
<li><code>belief</code> : boolean belief of experts or advertisers.</li>
<li><code>exp_ad</code> : number of experts (if <code>exp_adv = 0</code>), or advertising intervals (if <code>exp_adv = 1</code>).</li>
</ul>
<p><a id='SupportFunc.updaterec2-Tuple{Any,Any,Any,Any}' href='#SupportFunc.updaterec2-Tuple{Any,Any,Any,Any}'>#</a>
<strong><code>SupportFunc.updaterec2</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>updaterec2(soc, cc, period, agelimit)
</code></pre>

<p>Updates the <code>soc</code> array containing social and contamination record. This method of storing records assumes that individuals will be exposed with the same concentration as that of this year for the rest of their life (for calculating <code>cont-accumulation</code>).</p>
<p>Arguments:</p>
<ul>
<li><code>soc</code>: <code>[belief, usage, cont-accumulation, age]</code> of every individual of the past year</li>
<li><code>cc</code>: contaminant concentration</li>
<li><code>period</code> : coupling time increment (years)</li>
<li><code>agelimit</code> : age limit of each individual</li>
</ul>
<p>Returns:</p>
<ul>
<li><code>soc</code></li>
</ul>
<p><a id='SupportFunc.getrisk2-Tuple{Any,Any,Any,Any,Any,Any,Any}' href='#SupportFunc.getrisk2-Tuple{Any,Any,Any,Any,Any,Any,Any}'>#</a>
<strong><code>SupportFunc.getrisk2</code></strong> &mdash; <em>Method</em>.</p>
<pre><code>getrisk2(soc, cc, agelimit, irbw, ef, mfi, cpf)
</code></pre>

<p>Computes risk of exposure to cancer due to water contamination for each individual. please refer to this <a href="http://pubs.acs.org/doi/abs/10.1021/es400316c">link</a> for more information. </p>
<p>Arguments:</p>
<ul>
<li><code>soc</code> : <code>[belief, usage, cont-accumulation, age]</code> of every individual of the past year</li>
<li><code>cc</code> : contaminant concentration</li>
<li><code>agelimit</code> : age limit of each individual</li>
<li><code>irbw</code> : Ingestion rate of water per unit body weight (L kg/day)</li>
<li><code>ef</code> : Standard exposure frequency (day/year)</li>
<li><code>mfi</code>   : Metabolized fraction of contaminant</li>
<li><code>cpf</code> :  Cancer potency factor (Kg day/mg)</li>
</ul>
<p>Returns: </p>
<ul>
<li><code>risk</code> : Vector of risk (per thousand) for each individual.</li>
</ul>
<p><a id='index-1'></a></p>
<h2 id="index">index</h2>
<ul>
<li><a href="./#SocialDynamics.socdyn-Tuple{Any,Any,Any,Any,Any,Any,Any,Any}"><code>SocialDynamics.socdyn</code></a></li>
<li><a href="./#SocialDynamics.socdyncoupad-Tuple{Any,Any,Any,Any,Any,Any,Any}"><code>SocialDynamics.socdyncoupad</code></a></li>
<li><a href="./#SocialDynamics.socdyncoupexp-Tuple{Any,Any,Any,Any,Any,Any}"><code>SocialDynamics.socdyncoupexp</code></a></li>
<li><a href="./#SocialDynamics.treefuncad-Tuple{Any,Any,Any,Any,Any,Any,Any}"><code>SocialDynamics.treefuncad</code></a></li>
<li><a href="./#SocialDynamics.treefuncexp-Tuple{Any,Any,Any,Any,Any,Any}"><code>SocialDynamics.treefuncexp</code></a></li>
<li><a href="./#SocioHydrology.SocioFEHM-Tuple{}"><code>SocioHydrology.SocioFEHM</code></a></li>
<li><a href="./#SupportFunc.getrisk2-Tuple{Any,Any,Any,Any,Any,Any,Any}"><code>SupportFunc.getrisk2</code></a></li>
<li><a href="./#SupportFunc.pidcontrol-Tuple{Any,Any,Any,Any,Any,Any,Any,Any,Any}"><code>SupportFunc.pidcontrol</code></a></li>
<li><a href="./#SupportFunc.updaterec2-Tuple{Any,Any,Any,Any}"><code>SupportFunc.updaterec2</code></a></li>
</ul>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href=".." title="Introduction">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Introduction
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../examples/" title="Examples">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Examples
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="../assets/mathjaxhelper.js"></script>
    
    
  </body>
</html>